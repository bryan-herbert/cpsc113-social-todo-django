<!DOCTYPE html>
<html>
    
<head>
    <meta charset='utf-8'>
    <title>CPSC113 Social Todo App 2</title>
</head>

<style>
  body {
    background-color: #0099CC;
}

h1 {
    color: orange;
    text-align: center;
}

h2 {
    font-family: "Times New Roman";
    font-size: 20px;
    text-align: left;
    color: orange;
}

h5 {
    font: bold;
    text-align: left;
    color: white;
}

h3, h4, ul, form{
    color: white;
}

</style>

<body>
<h1>Herb's Corner</h1>

<h2>CPSC113 Social ToDo App</h2>

<div>
    <h5>Don't feel like this!</h5>
    <img src="http://ordiate.com/wp-content/uploads/2013/04/stress.jpg" alt="Stress" style="width:304px;height:228px;">
</div>

{% if errors %}
<div style="color:red" class="validation-error">
    {{errors}}
</div>
{% endif %}

{% if user.is_authenticated %}
    <h3>Welcome, {{request.user.first_name}}</h3>
    <div>
        <h4>Your Tasks</h4>

        <div>
        {% if tasks %}
          {% for task in tasks %}
            {% if task.isComplete %}
              <div class="tasks-list-item complete-task">
              <h2><span class="task-title"><s>{{task.title}}</s></span></h2>
              <h3><span class="task-description"><s><i>{{task.description}}</i></s></span></h3>
              <form action='/tasks/toggle/{{task.id}}' method="POST">
                {% csrf_token %}
                <button type="submit" name="toggle-task" class="toggle-task">Mark Incomplete</button>
              </form>
            {% else %}
              <div class="tasks-list-item">
              <h2><span class="task-title">{{task.title}}</span></h2>
              <h3><span class="task-description"><i>{{task.description}}</i></span></h3>
              <form action='/tasks/toggle/{{task.id}}' method="POST">
                {% csrf_token %}
                <button type="submit" name="toggle-task" class="toggle-task">Mark Complete</button>
              </form>
            {% endif %}
            {% if task.owner == user %}
              <form action='/tasks/delete/{{task.id}}' method="POST">
                {% csrf_token %}
                <button type="submit" name="delete-task" class="delete-task">Delete</button>
              </form>
            {% endif %}
              </div>
          {% endfor %}
        {% else %}
          <h2>no tasks to show</h2>
        {% endif %}
      </div>
    <hr>
    
    <div>
        <h4>Add a new task</h4>
        <form action="/tasks/create" method="POST">
            {% csrf_token %}
            <label for="title">Task title</label>
            <input name="title" type="text"><br>
            <label for="description">Task Description</label>
            <input name="description" type="text"><br>
            Collaborators<br>
            <input name="collaborator1" type="email"><br>
            <input name="collaborator2" type="email"><br>
            <input name="collaborator3" type="email"><br>
            <input type="submit" class="create-task-submit">
        </form>
    </div>

{% else %}
<div>
    <form class="login" action="/users/login" method="POST">
            {% csrf_token %}
        <label for="email">Email</label>
        <input name="email" id="email" type="text"><br>
        <label for="password">Password</label>
        <input name="password"  id="password" type="text"><br>
        <input type="submit"  class="log-in-submit">
    </form>
</div>

<div><hr></div>

{% endif %}
{% if not user.is_authenticated %}

<div id="registration">
  <form action="/users/registration" method="POST" class="registration">
    {% csrf_token %}
    <h2>Register Below</h2>
    {{registration}}
    <button class="sign-up-submit" type="submit">Submit</button>
</div>
{% endif %}

    <footer>
        <a href="/users/logout" class="logout">Logout</a>
    </footer>
</body>

</html>



